#!/usr/bin/env ruby

require_relative "../lib/site-inspector"
require "oj"

domain = ARGV[0]

http_only = ARGV[1] == "--http"

if domain.to_s.empty?
  puts "Usage: site-inspector [DOMAIN] [--http]"
  exit 1
end

details = SiteInspector.new(domain).to_hash(http_only)

puts Oj.dump(details, indent: 2, :mode => :compat)
